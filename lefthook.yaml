# Refer for explanation to following link:
# https://github.com/evilmartians/lefthook/blob/master/docs/full_guide.md

pre-commit:
  parallel: true

  commands:
    format:
      run: yarn format

    lint-markdown:
      glob: '*.md'
      run: npx -y markdownlint-cli2 {staged_files}

commit-msg:
  parallel: true

  commands:
    commitlint:
      run: npx -y commitlint --edit {1} --verbose

  scripts:
    'spell-check.sh':
      runner: bash

post-commit:
  scripts:
    'maintenance-brewfile.sh':
      runner: bash
      interactive: true

post-merge:
  parallel: true

  commands:
    npm:
      files: git diff --name-only HEAD main
      glob: '{package.json,yarn.lock}'
      run: yarn install

    tool-versions:
      files: git diff --name-only HEAD main
      glob: 'configs/asdf/.tool-versions'
      run: yarn install:environment

    delete-merged-branches:
      run: git branch --merged | grep -Ev '\*|master|main|dev|develop|development|stag|staging|prod|production' | xargs git branch -d; git fetch --prune;
